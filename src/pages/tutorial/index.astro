---
import PostList from "@@/post/PostList.astro";
import UITitle from "@@/ui/UITitle.astro";
import FullLayout from '@l/FullLayout.astro';
import { getCollection } from "astro:content";
import { debugInfo } from "@/utils/debug";

const COLLECTION_SLUG = 'tutorial';
// noinspection TypeScriptValidateTypes
const articles = await getCollection(COLLECTION_SLUG);

const navigationList = articles
  .sort((a, b) => {

    // Dates of collection entries
    const firstTutorialDate = new Date(a.data.publicationDate);
    const secondTutorialDate = new Date(b.data.publicationDate);

    // See information about sorting, when NODE_ENV === 'development'
    debugInfo({
      group: {
        title: `Tutorials Date Sorting [${a.data.title}] and [${b.data.title}]`
      },
      info: {
        "First Tutorial Date": firstTutorialDate,
        "Second Tutorial Date": secondTutorialDate,
        "Substraction": secondTutorialDate - firstTutorialDate
      }
    });

    // Returning substraction for sorting
    return secondTutorialDate - firstTutorialDate;
  })
  .map(item => {
    return {
      url: item?.slug ?
        `${COLLECTION_SLUG}/${item.slug}` :
        '/404',
      title: item.data.title,
      description: item.data.description,
      tags: item.data.tags
    }
  });
---


<FullLayout>
  <div class="article-page">
    <div class="article-page__title">
      <UITitle>Туториалы</UITitle>
    </div>
    <div class="article-page__list">
      <PostList postList={navigationList}/>
    </div>
  </div>
</FullLayout>

<style lang="scss">
  .article-page {
    padding: 32px 0;

    &__list {
      margin-top: 32px;
    }
  }
</style>
